# Cluster configuration
cluster:
  name: rs-cluster
  complexity: Large
  cidr: 192.168.0.0/16
  os: "csc-rs-ubuntu"

  nodegroups:
    # kube_control_plane, infra and gateway are MANDATORY
    - name: kube_control_plane
      sizing: "cpu=4,ram=[8-10],disk=80" # Safescale sizing format
    - name: infra
      count: 3 # /!\ Only nodes not included in the cluster flavor
      volume:
        type: HDD
        size: 300
      sizing: "cpu=8,ram=[14-18],disk=40"
      kubespray:
        node_labels: 
          node-role.kubernetes.io/infra: ''
    - name: gateway
      sizing: "cpu=2,ram=[4-5],disk=20"
      kubespray:
        node_labels:
          node-role.kubernetes.io/gateway: ''
        node_taints:
          - node-role.kubernetes.io/gateway:NoSchedule
        kubelet_config_extra_args:
          systemReserved:
            cpu: "1"
            memory: "2Gi"
    - name: egress
      sizing: "cpu=4,ram=[8-10],disk=40"
      kubespray:
        node_labels:
          node-role.kubernetes.io/egress: ''
    - name: prometheus
      count: 2
      sizing: "cpu=8,ram=[14-18],disk=80"
      kubespray:
        node_labels:
          node-role.kubernetes.io/infra: ''
          node-role.kubernetes.io/prometheus: ''

buckets:
  - "{{ cluster.name }}-elasticsearch-processing"
  - "{{ cluster.name }}-elasticsearch-security"
  - "{{ cluster.name }}-thanos"
  - "{{ cluster.name }}-loki"
