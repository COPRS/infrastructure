apiVersion: v1 
kind: Secret 
metadata: 
  name: postgres-backup-config
  labels:
    app.kubernetes.io/instance: postgres-operator
    app.kubernetes.io/managed-by: additional_resources
stringData: 
  BACKUP_SCHEDULE: "0 4 * * *" # Schedule a base backup every day at 4 am
  USE_WALG_BACKUP: "true" # Use the golang backup tool (faster)
  USE_WALG_RESTORE: "true" 
  BACKUP_NUM_TO_RETAIN: "30" # one month
  AWS_ACCESS_KEY_ID: "S3_ACCESS_KEY"
  AWS_SECRET_ACCESS_KEY: "S3_SECRET_KEY"
  AWS_ENDPOINT: "S3_ENDPOINT"
  AWS_REGION: "S3_REGION"
  WALG_DISABLE_S3_SSE: "false"
  WAL_S3_BUCKET: "S3_BUCKET"

  ## In case of point in time recovery/restore
  # CLONE_METHOD: CLONE_WITH_WALE
  # CLONE_AWS_ACCESS_KEY_ID: "S3_ACCESS_KEY" 
  # CLONE_AWS_SECRET_ACCESS_KEY: "S3_SECRET_KEY"
  # CLONE_AWS_ENDPOINT: "S3_ENDPOINT"
  # CLONE_AWS_REGION: "S3_REGION"
  # CLONE_WAL_S3_BUCKET: "S3_BUCKET"
  # CLONE_WAL_BUCKET_SCOPE_SUFFIX: ""
  # CLONE_TARGET_TIME: "2021-12-21T16:12:00+00:00" # time in the WAL archive that we want to restore
  # CLONE_SCOPE: infra-infra-postgres
