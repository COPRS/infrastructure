tags:
  install-elasticsearch: false
  install-mongodb: false

graylog:
  image:
    repository: graylog/graylog
    tag: 4.2.3-1

  mongodb:
    uri: "mongodb://{{ mongodb.username }}:{{ mongodb.password }}@mongodb.infra.svc.cluster.local/{{ mongodb.database }}"

  elasticsearch:
    hosts: http://elasticsearch-security-es-http.security.svc.cluster.local:9200
    version: 7
    
  persistence:
    storageClass: ceph-block
    size: 10Gi
  
  affinity:
    nodeAffinity:
      requiredDuringSchedulingIgnoredDuringExecution:
        nodeSelectorTerms:
          - matchExpressions:
            - key: "node-role.kubernetes.io/infra"
              operator: Exists
  resources:
    limits:
      cpu: 2000m
      memory: 8Gi
    requests:
      cpu: 500m
      memory: 3Gi

  env:
    GRAYLOG_TRUSTED_PROXIES: 10.244.0.0/16

  externalUri: http://security.{{ rs_domain_name }}/graylog
  
  ingress:
    enabled: false
