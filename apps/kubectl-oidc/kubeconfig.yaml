apiVersion: v1
clusters:
- cluster:
    server: https://kube.{{ rs_domain_name }}
  name: {{ cluster.name }}
contexts:
- context:
    cluster: {{ cluster.name }}
    user: oidc
  name: default
current-context: default
kind: Config
preferences: {}
users:
- name: oidc
  user:
    exec:
      apiVersion: client.authentication.k8s.io/v1beta1
      args:
      - oidc-login
      - get-token
      - --oidc-issuer-url=https://iam.{{ rs_domain_name }}/auth/realms/{{ keycloak.realm.name }}
      - --oidc-client-id=kubectl
      - --oidc-client-secret={{ kubectl_oidc.oidc_client_secret }}
      #- -v10
      command: kubectl
      env: null
      provideClusterInfo: false
