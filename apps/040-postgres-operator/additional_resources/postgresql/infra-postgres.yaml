apiVersion: "acid.zalan.do/v1"
kind: postgresql
metadata:
  name: infra-postgres
  labels:
    app.kubernetes.io/instance: postgres-operator
    app.kubernetes.io/managed-by: additional_resources
spec:
  teamId: infra
  volume:
    size: 8Gi
    storageClass: ceph-block
  numberOfInstances: 1
  enableMasterLoadBalancer: false
  enableReplicaLoadBalancer: false
  enableConnectionPooler: false
  enableLogicalBackup: false
  users:
    security.keycloak:  # database owner
      - superuser
      - createdb
    processing.scdf:
      - superuser
      - createdb
  databases:
    keycloak: security.keycloak  # dbname: owner
    skipper: processing.scdf
    dataflow: processing.scdf
  postgresql:
    version: "14"
