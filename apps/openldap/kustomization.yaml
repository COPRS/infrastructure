namespace: security

commonLabels:
  app.kubernetes.io/instance: {{ app_name }}

resources:
- BackupConfiguration/openldap-daily.yaml
- Repository/s3-backup.yaml
- Secret/stash-s3-credentials.yaml
- statefulset.yaml
- service.yaml
- svc-headless.yaml

configMapGenerator:
- name: openldap-env
  envs:
  - openldap.env
- name: openldap-bootstrap-database
  files:
  - bootstrap/custom.ldif
  - bootstrap/02-security.ldif
  
secretGenerator:
- name: openldap
  literals:
  - LDAP_ADMIN_PASSWORD={{ openldap.admin_user_password }}
  - LDAP_CONFIG_PASSWORD={{ openldap.config_user_password }}
  - LDAP_READONLY_USER_PASSWORD={{ openldap.readonly_user_password }}
