image:
  repository: bitnami/kafka
  tag: 2.8.1-debian-10-r25
replicaCount: 1
persistence:
  enabled: true
  storageClass: "ceph-block"
  size: 5Gi
affinity:
  nodeAffinity:
    requiredDuringSchedulingIgnoredDuringExecution:
      nodeSelectorTerms:
      - matchExpressions:
        - key: "node-role.kubernetes.io/worker"
          operator: In
          values:
          - infra
  podAntiAffinity:
    requiredDuringSchedulingIgnoredDuringExecution:
    - labelSelector:
        matchExpressions:
        - key: "app.kubernetes.io/component"
          operator: In
          values:
          - kafka
      topologyKey: "kubernetes.io/hostname"
resources:
  limits:
    cpu: 1000m
    memory: 5Gi
  requests:
    cpu: 250m
    memory: 2Gi
metrics:
  kafka:
    enabled: false
    image.tag: 1.4.2-debian-10-r41
  serviceMonitor:
    enabled: false
    interval: 30s
livenessProbe:
  initialDelaySeconds: 60
readinessProbe:
  initialDelaySeconds: 60
config: |
  broker.id=-1
  acks=all  
  min.insync.replicas=1
  unclean.leader.election.enable=false
  num.network.threads=3
  num.io.threads=8
  socket.send.buffer.bytes=102400
  socket.receive.buffer.bytes=102400
  socket.request.max.bytes=104857600
  log.dirs=/tmp/kafka-logs
  num.partitions=1
  num.recovery.threads.per.data.dir=1
  log.retention.hours=168
  log.segment.bytes=1073741824
  log.retention.check.interval.ms=300000
  zookeeper.connect=kafka-zookeeper.infra.svc.cluster.local
  zookeeper.connection.timeout.ms=10000
  offsets.topic.replication.factor=1
  transaction.state.log.replication.factor=1
  transaction.state.log.min.isr=1
  group.initial.rebalance.delay.ms=0
  default.replication.factor=1
  delete.topic.enable=true
  auto.create.topics.enable=false

zookeeper:
  enabled: true
  image:
    repository: bitnami/zookeeper
    tag: 3.7.0-debian-10-r157
  replicaCount: 1
  persistence:
    enabled: true
    storageClass: "ceph-block"
  affinity:
    nodeAffinity:
      requiredDuringSchedulingIgnoredDuringExecution:
        nodeSelectorTerms:
        - matchExpressions:
          - key: "node-role.kubernetes.io/worker"
            operator: In
            values:
            - infra
    podAntiAffinity:
      requiredDuringSchedulingIgnoredDuringExecution:
      - labelSelector:
          matchExpressions:
          - key: "app.kubernetes.io/component"
            operator: In
            values:
            - zookeeper
        topologyKey: "kubernetes.io/hostname"
  resources:
    limits:
      cpu: 500m
      memory: 1024Mi
    requests:
      cpu: 100m
      memory: 256Mi
  metrics:
    enabled: false
    serviceMonitor:
      enabled: false
      interval: 30s
        